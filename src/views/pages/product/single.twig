{#
  MALFUFA — product/single.twig
#}
{% extends 'layouts/master.twig' %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<div class="product-page">
  <div class="product-page-inner">

    {# Product Images #}
    <div class="product-gallery">
      {% if product.images %}
        <div class="gallery-main">
          <img id="main-img" src="{{ product.images[0].url }}" alt="{{ product.name }}">
        </div>
        <div class="gallery-thumbs">
          {% for img in product.images %}
            <img src="{{ img.url }}" alt="{{ product.name }}" class="thumb"
              onclick="document.getElementById('main-img').src = '{{ img.url }}'">
          {% endfor %}
        </div>
      {% endif %}
    </div>

    {# Product Info #}
    <div class="product-details">
      <h1 class="product-name">{{ product.name }}</h1>
      <div class="product-price-wrap">
        <span class="price-large">{{ product.price.amount | currency }}</span>
        {% if product.is_on_sale %}
          <span class="compare-price">{{ product.price.original_amount | currency }}</span>
        {% endif %}
      </div>
      <p class="product-description">{{ product.description | raw }}</p>

      {# Quantity Selector #}
      <div class="qty-selector">
        <button class="qty-btn" onclick="changeQty(-1)">−</button>
        <input type="number" id="qty-input" value="1" min="1">
        <button class="qty-btn" onclick="changeQty(1)">+</button>
      </div>

      {# Add to Cart #}
      <button class="add-to-cart-btn full-width"
        onclick="sallaAddToCart('{{ product.id }}', this, document.getElementById('qty-input').value)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <path d="M16 10a4 4 0 0 1-8 0"/>
        </svg>
        {{ trans('product.add_to_cart') }}
      </button>
    </div>
  </div>
</div>
{% endblock %}
