{#
  MALFUFA — header.twig
  Header with: Delivery/Pickup tabs | Address selector | Logo | Language EN/AR | Cart
#}
<header class="malfufa-header" id="site-header">

  {# ── FULFILLMENT TABS: Delivery / Pickup ── #}
  <div class="fulfillment-tabs">
    <button class="tab active" data-mode="delivery" onclick="setFulfillment('delivery', this)">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="1" y="3" width="15" height="13" rx="1"/>
        <path d="M16 8h4l3 5v4h-7V8z"/>
        <circle cx="5.5" cy="18.5" r="2.5"/>
        <circle cx="18.5" cy="18.5" r="2.5"/>
      </svg>
      <span>{{ trans('header.delivery') }}</span>
    </button>
    <button class="tab" data-mode="pickup" onclick="setFulfillment('pickup', this)">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9,22 9,12 15,12 15,22"/>
      </svg>
      <span>{{ trans('header.pickup') }}</span>
    </button>
  </div>

  {# ── ADDRESS SELECTOR ── #}
  <div class="address-selector" id="address-selector" onclick="toggleAddressPanel()">
    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
      <circle cx="12" cy="10" r="3"/>
    </svg>
    <span id="selected-address-text">{{ trans('header.select_address') }}</span>
    <svg class="chevron" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <polyline points="6,9 12,15 18,9"/>
    </svg>

    {# Address Dropdown Panel #}
    <div class="address-dropdown" id="address-panel">
      <div class="address-search">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input type="text" id="address-input"
          placeholder="{{ trans('header.search_address') }}"
          onclick="event.stopPropagation()">
      </div>
      <ul class="address-list" id="address-list">
        {# These can be made dynamic via Salla's customer address API #}
        <li onclick="selectAddress('{{ trans('cities.riyadh') }}, King Fahd Road')">
          {{ trans('cities.riyadh') }}, King Fahd Road
        </li>
        <li onclick="selectAddress('{{ trans('cities.riyadh') }}, Olaya')">
          {{ trans('cities.riyadh') }}, Olaya
        </li>
        <li onclick="selectAddress('{{ trans('cities.jeddah') }}')">
          {{ trans('cities.jeddah') }}
        </li>
        <li onclick="selectAddress('{{ trans('cities.dammam') }}')">
          {{ trans('cities.dammam') }}
        </li>
      </ul>
    </div>
  </div>

  {# ── LOGO (centered) ── #}
  <a href="{{ link('home') }}" class="header-logo" aria-label="{{ store.name }}">
    {% if settings.logo %}
      <img src="{{ settings.logo }}" alt="{{ store.name }}">
    {% else %}
      <span class="logo-text">MALFUFA</span>
    {% endif %}
  </a>

  {# ── RIGHT SIDE: Language + Cart ── #}
  <div class="header-right">

    {# Language Toggle #}
    <div class="lang-toggle">
      <a href="{{ link('lang', 'en') }}"
         class="lang-btn {{ app.locale.code == 'en' ? 'active' : '' }}">
        EN
      </a>
      <span class="lang-divider">|</span>
      <a href="{{ link('lang', 'ar') }}"
         class="lang-btn {{ app.locale.code == 'ar' ? 'active' : '' }}">
        عربية
      </a>
    </div>

    {# Cart Button #}
    <a href="{{ link('cart') }}" class="cart-btn" aria-label="{{ trans('header.cart') }}">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
        <line x1="3" y1="6" x2="21" y2="6"/>
        <path d="M16 10a4 4 0 0 1-8 0"/>
      </svg>
      {% if cart.count > 0 %}
        <span class="cart-count">{{ cart.count }}</span>
      {% endif %}
    </a>

  </div>
</header>
